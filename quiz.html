<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <style>
        /* Add your CSS styles here */
    </style>
</head>
<body>
    <div id="quiz-container">
        <!-- Quiz questions will be dynamically added here -->
    </div>

    <button id="prev-btn">Previous</button>
    <button id="next-btn">Next</button>

    <script>
        let currentQuestionIndex = 0;
        let quizData;

        async function loadQuiz() {
            const urlParams = new URLSearchParams(window.location.search);
            const quizId = urlParams.get('id');
            const response = await fetch(`http://localhost:8080/quizzes/${quizId}`);
            quizData = await response.json();
            renderQuestion(currentQuestionIndex);
        }

        function renderQuestion(index) {
            const question = quizData.questions[index];
            const quizContainer = document.getElementById('quiz-container');
            quizContainer.innerHTML = `
                <h2>Question ${index + 1}</h2>
                <p>${question.description}</p>
                <!-- Display image if available -->
                ${question.image ? `<img src="${question.image}" alt="Question Image">` : ''}
                <ul>
                    ${question.choices.map(choice => `<li>${choice}</li>`).join('')}
                </ul>
            `;
            updateButtonsVisibility();
        }

        function updateButtonsVisibility() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            prevBtn.style.display = currentQuestionIndex === 0 ? 'none' : 'block';
            nextBtn.innerText = currentQuestionIndex === quizData.questions.length - 1 ? 'Submit' : 'Next';
        }

        function onNextClick() {
            if (currentQuestionIndex < quizData.questions.length - 1) {
                currentQuestionIndex++;
                renderQuestion(currentQuestionIndex);
            } else {
                // Logic to handle submission (e.g., calculate score)
                alert('Quiz submitted! Implement score calculation logic here.');
            }
        }

        function onPrevClick() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion(currentQuestionIndex);
            }
        }

        // Event listeners
        document.getElementById('next-btn').addEventListener('click', onNextClick);
        document.getElementById('prev-btn').addEventListener('click', onPrevClick);

        // Load quiz when the page is loaded
        window.onload = loadQuiz;
    </script>
</body>
</html>